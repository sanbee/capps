<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
      file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="hanningsmooth" category="calibration">
	<shortdescription>Hanning smooth frequency channel data to remove Gibbs ringing</shortdescription>
	<description>This function Hanning smoothes the frequency channels with
        a weighted running average of smoothedData[i] =
        0.25*correctedData[i-1] + 0.50*correctedData[i] +
        0.25*correctedData[i+1].  The first and last channels are flagged.
        Inclusion of a flagged value in an average causes that data value
        to be flagged.
	WARNING: by default, all visibility columns will be smoothed. This will 
                 modify the DATA column of the output MS in order to make sure that
		 later gaincal will work on the smoothed data, e.g. as part of self-cal.
	</description>
	<input>
		<param type="string" name="vis">
			<description>Name of input visibility file (MS)</description>
			<value></value>
                        <example>vis='ngc5921.ms'</example>
		</param>
                <param type="string" name="datacolumn" ignorecase="True">
		  <description>the name of the MS column into which to write the smoothed data</description>
		  <value>all</value>
		  <allowed kind="enum">
		    <value>corrected</value>
		    <value>data</value>
		    <value>all</value>
		  </allowed>
		</param>
		<param type="string" name="outputvis">
			<description>name of the output visibility file (MS)</description>
			<value></value>
                        <example>outputvis='ngc5921-hs.ms'</example>
		</param>
	</input>
<returns type="void"/>

<example>

    This function Hanning smoothes the frequency channels with
    a weighted running average of smoothedData[i] =
    0.25*correctedData[i-1] + 0.50*correctedData[i] +
    0.25*correctedData[i+1].  The first and last channels are flagged.
    Inclusion of a flagged value in an average causes that data value
    to be flagged.
    WARNING: by default, all visibility columns will be smoothed. This will 
             modify the DATA column of the output MS in order to make sure that
             later gaincal will work on the smoothed data, e.g. as part of self-cal.

    Keyword arguments:
    vis -- Name of input visibility file (MS)
           default: none; example: vis='ngc5921.ms'
    datacolumn -- the name of the MS column into which to write the smoothed data
                  default='all'; example: datacolumn='corrected'
                  options: 'corrected', 'data', 'all'
    outputvis -- name of the output visibility file (MS)
                 default=none (write to the input MS); example: outputvis='ngc5921_src.ms'

    hanningsmooth(vis='ngc4852.ms', datacolumn='data', outputvis='ngc4852-hs.ms')		 


 </example>
 </task>
 </casaxml>
