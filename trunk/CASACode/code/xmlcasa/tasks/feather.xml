<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
      file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="feather" category="imaging">
	<shortdescription>Combine two images using their Fourier transforms</shortdescription>
	<description>
The algorithm converts each image to the gridded visibility plane, combines
them, and reconverts them into an combined image.  Each image must include a
well-defined beam shape (clean beam) in order for feathering to work well.  The
two images must have the same flux density normalization scale.

	</description>
	<input>
		<param type="string" name="imagename">
			<description>Name of output feathered image</description>
			<value></value>
		</param>
		<param type="string" name="highres" mustexist="true">
			<description>Name of high resolution (interferometer) image</description>
			<value></value>
		</param>
		<param type="string" name="lowres" mustexist="true">
			<description>Name of low resolution (single dish) image</description>
			<value></value>
		</param>
	</input>

<example>

	This algorithm, called feathering, is a simple method for combining two
        images with different spatial resolution.  The processing steps are:

	       0. regrid the low resolution image to a temporary copy matching the
	          high resolution image,
               1. transform each image to the gridded visibility plane,
               2. sum the gridded visibilities
               3. transform back to the image plane.

        The task name comes from the  smooth switching from
	one data set to the other using weights assigned according to the
	sensitivity of each at any given spatial frequency.  Gaps, if any,
        between the spatial frequency ranges are not filled.

	Each image must have a well-defined beam shape (clean beam) for
	feathering to work well.  The two images must have the same flux
	density normalization scale.

        This task is somewhat experimental and will improve as more experience
        with single-dish and interferometric data is obtained over the next few years.


	Keyword arguments:
        imagename -- Name of output feathered image
                default: none; example: imagename='orion_combined.im'
        highres -- Name of high resolution (interferometer) image
                default: none; example: highres='orion_vla.im'
	     This image is often a clean image obtained from synthesis
		observations.
        lowres -- Name of low resolution (single dish) image
                default: none; example: lowres='orion_gbt.im'
	     This image is often a image from a single-dish observations
	        or a clean image obtained from lower resolution synthesis
		observations.

        Comments:

            The advantage of feathering is that one does not have to go back to
            the visibility data and then image and deconvolve.  It starts with
            the high-quality image (with the accurate clean beam).  This is
            particularly useful for combining a high-resolution interferometric
            image with a lower-resolution single-dish image, although
            D-configuration and A-configuration EVLA data can also be combined.
            There are often uncertainties in the relative flux density scales
            between the two images, and the current implementation of feathers
            does not adjustment.

            The clean task also has a method of combining two sets of data with
            different resolution.  The high resolution visibility data begins
            deconvolution, starting with a modelimage of the lower-resolution
            image.  The lower-resolution image must be clean components (or a
            sky model), not the low resolution image with its intrinsic
            resolution.

</example>
</task>
</casaxml>
